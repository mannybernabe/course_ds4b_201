{
    "collab_server" : "",
    "contents" : "# Data Understanding ----\n\nlibrary(tidyverse); library(tidyquant); library(readxl)\nlibrary(skimr); library(GGally)\n\npath_train           <- \"00_Data/telco_train.xlsx\" \npath_data_definition <- \"00_Data/telco_data_definitions.xlsx\"\n\n\ntrain_raw_tbl <- read_excel(path_train,sheet = 1)\ndefinitions_raw_tbl<-read_excel(path_data_definition, sheet = 1, col_names = FALSE)\n\n\nglimpse(train_raw_tbl)\n# 1) descriptive features, 2) emloyement features (job level, etc. ), 3) compensation feaures, 4) survey results, \n#5) performance features, #6) work life features, #7) training and education, #8) time base features\n\n\nView(definitions_raw_tbl)\n\n#Exploratory Data Analysis ----\n\n# step 1: Data Summarization ----\n\nskim(train_raw_tbl)\n\n# Character Data Type\n\ntrain_raw_tbl %>% \n  select_if(is.character) %>% \n  glimpse()\n\n\ntrain_raw_tbl %>% \n  select_if(is.character) %>% \n  map(unique)\n\n\n\ntrain_raw_tbl %>% \n  select_if(is.character) %>% \n  map(~table(.) %>% prop.table())\n\n\n# Numeric Data \n\ntrain_raw_tbl %>% \n  select_if(is.numeric) %>% \n  map(~unique(.) %>% length())\n\n\ntrain_raw_tbl %>% \n  select_if(is.numeric) %>% \n  map_df(~unique(.) %>% length()) %>% \n  gather() %>% \n  arrange(value) %>% \n  filter(value <=10)\n\n\n# Step 2: Data Visualization ----\n\ntrain_raw_tbl %>% \n  select(Attrition, Age, Gender, \n         MaritalStatus, NumCompaniesWorked, \n         Over18, DistanceFromHome) %>% \n  ggpairs()\n\n\n\ntrain_raw_tbl %>% \n  select(Attrition, Age, Gender, \n         MaritalStatus, NumCompaniesWorked, \n         Over18, DistanceFromHome) %>% \n  ggpairs(aes(color=Attrition), lower=\"blank\",\n          legend = 1, \n          diag = list(continous=wrap(\"densityDiag\",alpha=0.5)))+\n  theme(legend.position = \"bottom\")\n\n\n\n\nplot_ggpairs <- function(data, color = NULL, density_alpha=0.5){\n  \n  color_expr <- enquo(color)\n  \n  if (rlang::quo_is_null(color_expr)){\n    \n    g<-data %>% \n      ggpairs(lower=\"blank\")\n  } else {\n    \n    color_name <- quo_name(color_expr)\n    g <- data %>% \n      ggpairs(mapping=aes_string(color=color_name),\n              lower=\"blank\", legend = 1, \n              diag=list(continous=wrap(\"densityDiag\",\n                                       alpha=density_alpha))) +\n      theme(legend.position = \"bottom\")\n  \n  }\n  \n  return(g)\n  \n  \n}\n\n\ntrain_raw_tbl %>% \n  select(Attrition, Age, Gender, \n         MaritalStatus, NumCompaniesWorked, \n         Over18, DistanceFromHome) %>% \n  plot_ggpairs(color=Attrition)\n\n\n#Explore Feature by Category\n\n#1 Descriptive features: age, gender, marital status\ntrain_raw_tbl %>% \n  select(Attrition, Age, Gender, \n         MaritalStatus, NumCompaniesWorked, \n         Over18, DistanceFromHome) %>% \n  plot_ggpairs(Attrition)\n\n\n#2 employment figures\ntrain_raw_tbl %>% \n  select(Attrition, contains(\"employee\"), \n         contains(\"department\"), \n         contains(\"job\")) %>% \n  plot_ggpairs(Attrition)\n\n\n#3 compensation features \n\ntrain_raw_tbl %>% \n  select(Attrition, contains(\"income\"), \n         contains(\"rate\"), \n         contains(\"salary\"),\n         contains(\"stock\")) %>% \n  plot_ggpairs(Attrition)\n\n\n#4 survey results: satisfication leve, workLifeBalance\n\ntrain_raw_tbl %>% \n  select(Attrition, contains(\"satisfaction\"),\n         contains(\"life\"), contains(\"salary\"),\n         contains(\"stock\"))%>% \n        plot_ggpairs(Attrition)\n  \n  \n#5 Performance data: Job Involvement, Performance Rating\ntrain_raw_tbl %>% \n  select(Attrition, contains(\"performance\"), \n         contains(\"involvement\")) %>% \n  plot_ggpairs(Attrition)\n\n\n#6 Work-Life Features\ntrain_raw_tbl %>% \n  select(Attrition, contains(\"overtime\"), contains(\"travel\")) %>% \n  plot_ggpairs(Attrition)\n\n#7 Training and Education\ntrain_raw_tbl %>% \n  select(Attrition, contains(\"training\"), contains(\"education\")) %>% \n  plot_ggpairs(Attrition)\n\n\n#8 #time base features\ntrain_raw_tbl %>% \n  select(Attrition, contains(\"years\")) %>% \n  plot_ggpairs(Attrition)\n  \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",
    "created" : 1550281844342.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1332568090",
    "id" : "DD9C9371",
    "lastKnownWriteTime" : 1550283786,
    "last_content_update" : 1550283786137,
    "path" : "~/Documents/GTD/DS4B 201/HR_201_Employee_Attrition_Project/02_Data_Understanding/data_understanding.R",
    "project_path" : "02_Data_Understanding/data_understanding.R",
    "properties" : {
        "docOutlineVisible" : "1",
        "tempName" : "Untitled1"
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}